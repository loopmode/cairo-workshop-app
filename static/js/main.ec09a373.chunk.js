(this["webpackJsonpcairo-workshop-app"]=this["webpackJsonpcairo-workshop-app"]||[]).push([[0],{57:function(e,t,n){e.exports=n(92)},62:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),o=n.n(c),l=(n(62),n(2)),u=n(18),i=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Hello!"))},s=n(4),m=n(23),p=Object(m.b)({name:"todos",initialState:{},reducers:{addTodo:function(e,t){e[t.payload.id]=t.payload},removeTodo:function(e,t){delete e[t.payload]},toggleTodo:function(e,t){var n=e[t.payload];n&&(n.completed=!n.completed)}}}),h=p.actions,f=h.addTodo,d=h.removeTodo,v=h.toggleTodo,b=p.reducer;var E=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.todos}));return r.a.createElement("div",null,Object.values(t).map((function(t){return r.a.createElement("div",{className:"flex",key:t.id},r.a.createElement("label",{className:"flex-1"},r.a.createElement("input",{type:"checkbox",onChange:function(){return e(v(t.id))}}),t.text,r.a.createElement("button",{style:{marginLeft:30},onClick:function(){return e(d(t.id))}},"remove")))})))},g=n(22),j=function(){var e=r.a.useState(""),t=Object(g.a)(e,2),n=t[0],a=t[1],c=Object(s.b)(),o=function(e){e.preventDefault();var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"".concat(Date.now());return{id:t,text:e,completed:!1}}(n);c(f(t)),a("")};return r.a.createElement("form",{onSubmit:o},r.a.createElement("input",{value:n,onChange:function(e){return a(e.target.value)}}),r.a.createElement("button",{onClick:o},"add"))},y=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Todos"),r.a.createElement(j,null),r.a.createElement(E,null))},O=function(){return r.a.createElement("div",null,"BoardPage")},w=n(26),x=n(19),k=n(3),C=n.n(k),S=n(10),T=n(28),U=Object(m.b)({name:"auth",initialState:{isAuthenticated:!1,user:null,error:null},reducers:{loginError:function(e,t){e.error=t.payload,e.isAuthenticated=!1},loginSuccess:function(e,t){e.error=null,e.isAuthenticated=!1,e.user=t.payload},logoutError:function(e,t){e.error=t.payload},logoutSuccess:function(e){e.isAuthenticated=!1,e.user=null},registerSuccess:function(e,t){e.isAuthenticated=!0,e.user=t.payload},registerError:function(e,t){e.error=t.payload}}}),P=U.actions,A=P.loginError,N=P.loginSuccess,F=P.logoutError,I=P.logoutSuccess,L=P.registerError,D=P.registerSuccess,R=U.reducer,B=function(e){return new Promise((function(t){return setTimeout(t,e)}))},M={email:"",password:""},W=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth.error})),n=r.a.useState(M),a=Object(g.a)(n,2),c=a[0],o=a[1],l=function(e){o(Object(x.a)({},c,Object(w.a)({},e.target.name,e.target.value)))};return r.a.createElement("form",{onSubmit:function(t){var n,a;t.preventDefault(),e((n=c.email,a=c.password,function(){var e=Object(S.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(1e3*Math.random());case 3:return e.next=5,T.a.signin(n,a);case 5:r=e.sent,t(N(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(A(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))}},t&&r.a.createElement("p",null,t),r.a.createElement("input",{value:c.email,onChange:l,name:"email",type:"email",autoComplete:"username",required:!0}),r.a.createElement("input",{value:c.password,onChange:l,name:"password",type:"password",autoComplete:"current-password",required:!0}),r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement("button",{type:"button",onClick:function(){var t,n;e((t=c.email,n=c.password,function(){var e=Object(S.a)(C.a.mark((function e(a){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(1e3*Math.random());case 3:return e.next=5,T.a.signup(t,n);case 5:r=e.sent,a(D(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a(L(e.t0.toString()));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))}},"Register"))};function Q(){return null!==Object(s.c)((function(e){return e.auth.user}))}var q=function(){var e=Q(),t=Object(u.h)(),n=Object(u.g)(),a=(t.state||{from:"/"}).from;return r.a.useEffect((function(){e&&a&&n.push(a)}),[n,a,e]),r.a.createElement("div",null,r.a.createElement("h1",null,"Log in"),r.a.createElement(W,null))},J=n(11),z=n(12),H=n(14),V=n(13),$=n(15),G=n(27),K=n.n(G);function X(e){var t=e.users,n=void 0===t?[]:t;return r.a.createElement("table",null,r.a.createElement("tbody",null,n.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.username))}))))}function Y(e){var t=e.value,n=e.onChange;return r.a.createElement("form",null,r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))}function Z(e,t){return t?e.filter((function(e){return e.username.toLowerCase().match(t.toLowerCase())})):e}function _(e){var t=e.url,n=void 0===t?"https://jsonplaceholder.typicode.com/users":t,a=r.a.useState({allUsers:[],visibleUsers:[],filter:""}),c=Object(g.a)(a,2),o=c[0],l=c[1],u=r.a.useCallback(Object(S.a)(C.a.mark((function e(){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get(n);case 2:t=e.sent,a=t.data,l((function(e){return Object(x.a)({},e,{allUsers:a,visibleUsers:a})}));case 5:case"end":return e.stop()}}),e)}))),[n]),i=r.a.useCallback((function(e){l((function(t){return Object(x.a)({},t,{filter:e,visibleUsers:Z(t.allUsers,e)})}))}),[]);return r.a.useEffect((function(){u()}),[u]),r.a.createElement("div",null,r.a.createElement(Y,{value:o.filter,onChange:i}),r.a.createElement(X,{users:o.visibleUsers}))}var ee=function(e){function t(){var e,n;Object(J.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(H.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state={allUsers:[],visibleUsers:[],filter:""},n.applyFilter=function(e){var t=Z(n.state.allUsers,e);n.setState({filter:e,visibleUsers:t})},n}return Object($.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){this.loadUsers()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Y,{value:this.state.filter,onChange:this.applyFilter}),r.a.createElement(X,{users:this.state.visibleUsers}))}},{key:"loadUsers",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get("https://jsonplaceholder.typicode.com/users");case 2:t=e.sent,n=t.data,this.setState({allUsers:n,visibleUsers:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(r.a.Component),te=function(e){function t(){return Object(J.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex-1"},r.a.createElement(_,null)),r.a.createElement("div",{className:"flex-1"},r.a.createElement(ee,null)))}}]),t}(r.a.Component),ne=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Reusing reducer logic"),r.a.createElement("p",null,"Based on"," ",r.a.createElement("a",{href:"https://redux.js.org/recipes/structuring-reducers/reusing-reducer-logic/"},"reusing-reducer-logic")),r.a.createElement(ae,{name:"counterA"}),r.a.createElement(ae,{name:"counterB"}),r.a.createElement(ae,{name:"counterC"}))};function ae(e){var t=e.name,n=Object(s.b)(),a=Object(s.c)((function(e){return e[t]}));return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return n({type:"DECREMENT",name:t})}},"-"),r.a.createElement("code",null," ",a," "),r.a.createElement("button",{onClick:function(){return n({type:"INCREMENT",name:t})}},"+"))}var re=n(52);function ce(e){var t=e.fallback,n=void 0===t?null:t,a=Object(re.a)(e,["fallback"]);return Q()?r.a.createElement(u.b,a):n||r.a.createElement(u.a,{to:{pathname:"/login",state:{from:a.location}}})}var oe=function(e){var t=e.redirect,n=void 0===t?"":t,a=Q(),c=Object(u.g)(),o=Object(s.b)();return a?r.a.createElement("button",{onClick:function(){o(function(){var e=Object(S.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.signout();case 3:t(I()),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t(F(e.t0.toString()));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),n&&c.push(n)}},"Log out"):null},le=function(){return Q()?r.a.createElement(oe,null):r.a.createElement(l.c,{to:"/login"},"Log in")},ue=n(35),ie=n.n(ue),se={getParams:function(e){return ie.a.parse(e,{ignoreQueryPrefix:!0})},getSearchTerm:function(e){return se.getParams(e).searchTerm},getPageNumber:function(e){return se.getParams(e).page},getIdFromUrl:function(e){var t=e.split("/");return t[t.length-2]}},me={results:[],isLoading:!1,previous:"",next:"",searchTerm:""},pe=function(e){function t(){var e,n;Object(J.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(H.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(r)))).state=Object(x.a)({},me),n.handleFormSubmit=function(e){e.preventDefault(),n.state.searchTerm?n.props.history.push("/swapi/people/?searchTerm=".concat(encodeURIComponent(n.state.searchTerm||"*"))):n.props.history.push("/swapi/people/")},n.handleInputChange=function(e){n.setState({searchTerm:e.target.value})},n}return Object($.a)(t,e),Object(z.a)(t,[{key:"componentDidMount",value:function(){var e=Object(S.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.handleQueryParams(this.props.location.search);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e.location.search!==this.props.location.search&&this.handleQueryParams(this.props.location.search)}},{key:"componentWillUnmount",value:function(){this.abortFetch&&this.abortFetch()}},{key:"render",value:function(){var e=this.state,t=e.previous,n=e.next,a=e.isLoading,c=e.searchTerm,o=e.results;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h3",null,"People search"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("input",{type:"text",onChange:this.handleInputChange,value:c,disabled:a}),r.a.createElement("button",{type:"submit",disabled:a},"Search"))),o.map((function(e){return r.a.createElement("div",{key:e.url},r.a.createElement(l.b,{to:"/swapi/people/".concat(se.getIdFromUrl(e.url))}," ",e.name))})),r.a.createElement("footer",null,r.a.createElement("nav",null,t&&r.a.createElement(l.b,{to:"/swapi/people/?searchTerm=".concat(this.state.searchTerm,"&page=").concat(se.getPageNumber(t))},"prev"),n&&r.a.createElement(l.b,{to:"/swapi/people/?searchTerm=".concat(this.state.searchTerm,"&page=").concat(se.getPageNumber(n))},"next"))))}},{key:"handleQueryParams",value:function(e){var t=se.getParams(e),n=t.page,a=t.searchTerm;a?this.search(a,n):this.setState(me)}},{key:"search",value:function(){var e=Object(S.a)(C.a.mark((function e(t,n){var a,r,c,o,l,u,i,s,m;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0,searchTerm:t}),a=new AbortController,r=a.signal,this.abortFetch=function(){return a.abort()},e.prev=4,c={format:"json"},"*"!==t&&(c.search=t),n&&(c.page=n),o="".concat(this.props.apiUrl).concat(ie.a.stringify(c,{addQueryPrefix:!0})),e.next=11,fetch(o,{signal:r});case 11:return l=e.sent,e.next=14,l.json();case 14:u=e.sent,i=u.next,s=u.previous,m=u.results,this.setState({isLoading:!1,previous:s,next:i,results:m}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),"AbortError"!==e.t0.name&&console.error("search failed",e.t0);case 24:this.abortFetch=null;case 25:case"end":return e.stop()}}),e,this,[[4,21]])})));return function(t,n){return e.apply(this,arguments)}}()}]),t}(r.a.Component);pe.defaultProps={apiUrl:"https://swapi.co/api/people/"};var he=function(e){function t(){return Object(J.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){var e=this.props.match.params.id;return r.a.createElement("div",null,r.a.createElement("h3",null,"Star Wars API: Result ",e))}}]),t}(r.a.Component),fe=function(e){function t(){return Object(J.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(z.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Star Wars API pages"),r.a.createElement("nav",null,r.a.createElement(l.b,{to:"/swapi/planets"},"Planets"),r.a.createElement(l.b,{to:"/swapi/spaceships"},"Spaceships"),r.a.createElement(l.b,{to:"/swapi/vehicles"},"Vehicles"),r.a.createElement(l.b,{to:"/swapi/people"},"People"),r.a.createElement(l.b,{to:"/swapi/films"},"Films"),r.a.createElement(l.b,{to:"/swapi/species"},"Species")),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/swapi/people(/?)",component:pe}),r.a.createElement(u.b,{exact:!0,path:"/swapi/people/:id/",component:he})))}}]),t}(r.a.Component),de=n(36),ve=n(37);function be(){var e=Object(de.a)(["\n  > header,\n  main {\n    padding: 1em;\n  }\n  ",".active {\n    background: yellow;\n  }\n"]);return be=function(){return e},e}function Ee(){var e=Object(de.a)(["\n  text-decoration: none;\n  &.active {\n    text-decoration: underline;\n  }\n  font-size: 50px;\n  color: ",";\n"]);return Ee=function(){return e},e}var ge=Object(ve.a)(l.c)(Ee(),(function(e){return e.special?"hotpink":"inherit"})),je=ve.a.div(be(),ge);var ye=function(){return r.a.createElement(l.a,null,r.a.createElement(je,null,r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement(ge,{to:"/",exact:!0},"Dashboard"),r.a.createElement(ge,{to:"/counters"},"Counters"),r.a.createElement(ge,{to:"/list"},"Todo list"),r.a.createElement(ge,{to:"/board"},"Board"),r.a.createElement(ge,{to:"/users"},"Users"),r.a.createElement(ge,{to:"/swapi",special:!0},"Start Wars API"),r.a.createElement("span",{className:"flex-1"}),r.a.createElement(le,null))),r.a.createElement("main",null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",exact:!0,component:i}),r.a.createElement(u.b,{path:"/login",component:q}),r.a.createElement(u.b,{path:"/counters",component:ne}),r.a.createElement(ce,{path:"/list",component:y}),r.a.createElement(ce,{path:"/board",component:O}),r.a.createElement(ce,{path:"/users",component:te}),r.a.createElement(ce,{path:"/swapi",component:fe})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Oe=n(8);function we(e,t){return function(n,a){return a.name===t||void 0===n?e(n,a):n}}function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCREMENT":return e+1;case"DECREMENT":return e-1;default:return e}}var ke=Object(Oe.combineReducers)({auth:R,todos:b,counterA:we(xe,"counterA"),counterB:we(xe,"counterB"),counterC:we(xe,"counterC")}),Ce=Object(m.a)({reducer:ke});"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),o.a.render(r.a.createElement(s.a,{store:Ce},r.a.createElement(ye,null)),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.ec09a373.chunk.js.map